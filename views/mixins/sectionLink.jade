mixin sectionLink(section)
  if section
    - var href = '/diff/' + section.path.split('/').map(encodeURIComponent).join('/');
    a(href=href).sectionLink
      - var diffStats = section.diffStats;
      - var whatwg = (diffStats.whatwg.total > 0) ? (diffStats.whatwg.diffCount / diffStats.whatwg.total) : 0;
      - var w3c = (diffStats.w3c.total > 0) ? (diffStats.w3c.diffCount / diffStats.w3c.total) : 0;
      - var diffRatio = (whatwg > w3c) ? whatwg : w3c;
      meter.meter(value=diffRatio, high='0.5')
      | #{section.headingText}
      |  
      span.icons
        if section.whatwg
          img.icon(alt='available at HTML Standard ', src='/images/whatwg.svg')
        if section.w3c
          img.icon(alt='available at HTML 5.1 Editor\'s Draft ', src='/images/w3c.svg')
  else
    | None

mixin sectionLegends
  div.legends
    p Legends:
    dl
      dt
       img.icon(alt='available at HTML Standard ', src='/images/whatwg.svg')
      dd
       p A section available at HTML Standard.
      dt
       img.icon(alt='available at HTML 5.1 Editor\'s Draft ', src='/images/w3c.svg')
      dd
       p A section available at HTML 5.1.
