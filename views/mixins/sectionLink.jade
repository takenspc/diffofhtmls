mixin sectionLink(section)
  if section
    - var href = '/diff/' + section.path.split('/').map(encodeURIComponent).join('/');
    a(href=href).sectionLink
      - var whatwg = section.whatwg ? section.whatwg.diffStat : null;
      - var whatwgDiff = (whatwg && whatwg.total > 0) ? (whatwg.diffCount / whatwg.total) : 0;

      - var w3c = section.w3c ? section.w3c.diffStat : null;
      - var w3cDiff = (w3c && w3c.total > 0) ? (w3c.diffCount / w3c.total) : 0;

      - var diffRatio = (whatwgDiff > w3cDiff) ? whatwgDiff : w3cDiff;
      meter.meter(value=diffRatio, high='0.5', data-x-w3c=w3cDiff, data-x-whatwg=whatwgDiff)
      | #{section.headingText}
      |  
      span.icons
        if section.whatwg
          img.icon(alt='available at HTML Standard ', src='/images/whatwg.svg')
        if section.w3c
          img.icon(alt='available at HTML 5.1 Editor\'s Draft ', src='/images/w3c.svg')
  else
    | None

mixin sectionLegends
  div.legends
    p Legends:
    dl
      dt
       img.icon(alt='available at HTML Standard ', src='/images/whatwg.svg')
      dd
       p A section available at HTML Standard.
      dt
       img.icon(alt='available at HTML 5.1 Editor\'s Draft ', src='/images/w3c.svg')
      dd
       p A section available at HTML 5.1.
